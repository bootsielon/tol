//////////////////////////////////////////////////////////////////////////////
// FILE   : test.tol
// PURPOSE: test for CINT API
//////////////////////////////////////////////////////////////////////////////

Text email_ = "vdebuen@tol-project.org"; 
Text link_ = "";
Text summary_ = "Test for CINT API. Exporting TOL variables to CINT." ;


//Write here the initial test TOL code if needed

Real numErr0 = Copy(NError);

Real const = 8759;
Real tolNum = Copy(const);

Matrix tolMat = Col(1,2,3,4,5,6,7);

Real imp = Cint.import_from_tol(tolNum, tolMat);

Real Cint.exec_text("
  tolNum *= 2
");

Real cintNum = Cint.calc("tolNum");

Real tolMat3 = Cint.calc("tolMat(3,1)");

Real Cint.exec_text("tolMat(3,1) *= 2");

Real tolMat3_2 = MatDat(tolMat,3,1);

Real numErr1 = Copy(NError);

//Extented information about test behaviour
Set partialResults_ = 
[[
  numErr0,
  numErr1,
  tolNum,
  cintNum,
  imp,
  tolMat3,
  tolMat3_2
]];

//This is a messure of the success of the test 
Real quality_ = And(
  numErr0 == numErr1, 
  imp==2,
  tolNum==2*const, 
  cintNum==2*const,
  tolMat3 == 3,
  tolMat3_2 == 6);

//Return the results 
Set resultStr_ = @strTestStatus(summary_, link_, quality_,
                  "Partial results = "<<partialResults_,
                  "NO DBServerType", "NO DBServerHost", "NO DBAlias",
                  email_);
WriteLn(""<<resultStr_);
WriteLn("NObject="<<NObject);
WriteLn("NCore="<<NCore);
resultStr_
/* */




