////////////////////////////////////////////////////////////////////////////////
// FILE: test.tol
// PURPOSE: test for NameBlock Rglpk
////////////////////////////////////////////////////////////////////////////////
/*
  Simple linear program.
  maximize:   2 x_1 + 4 x_2 + 3 x_3
  subject to: 3 x_1 + 4 x_2 + 2 x_3 < 60
              2 x_1 +   x_2 +   x_3 < -1
                x_1 + 3 x_2 + 2 x_3 < 80
                x_1, x_2, x_3 are non-negative real numbers
*/

Set sol1 = {
  Matrix obj = ((0,0,0)); 
//  Matrix obj = ((2,4,3)); 
  Matrix mat = ((3,4,2),
                (2,1,1),
                (1,3,2));
  Matrix rhs = ((60, Real -1,80));

  Set bounds = [[ {Set lower=[[ [[1, Real -Inf]], [[2, Real -Inf]], [[3, Real -Inf]] ]]} ]];

  Set sol=Rglpk::solveLP(obj, mat, rhs,
                         {[[Set dir=[["<","<","<"]], Set bounds,
                          Real verbose=TRUE, Real max=FALSE]]});
  Matrix check1 = mat*Tra(sol["solution"]) - Tra(rhs);


  Set View([[check1]], "Std");

  Set sol

};

/*
  The same as before but setting:  x2 <= 4
 */
Set sol2 = {
  Matrix obj = ((2,4,3)); 
  Matrix mat = ((3,4,2),
                (2,1,2),
                (1,3,2));
  Matrix rhs = ((60,40,80));

  Set bounds = [[ {Set upper=[[ [[2, 4.0]] ]]} ]];

  Set sol=Rglpk::solveLP(obj, mat, rhs,
                         {[[bounds, Real verbose=TRUE, Real max=TRUE]]});

  Set sol
};

/*
  Simple mixed integer linear program.
  maximize:    3 x_1 + 1 x_2 + 3 x_3
  subject to: -1 x_1 + 2 x_2 +   x_3 <= 4
                       4 x_2 - 3 x_3 <= 2
                 x_1 - 3 x_2 + 2 x_3 <= 3
                 x_1, x_3 are non-negative integers
                  x_2 is a non-negative real number
*/

Set sol3 = {
  Matrix obj = ((2,1,3)); 
  Matrix mat = ((Real -1,2,1),
                (0,4,Real -3),
                (1,-Real 3,2));
  Matrix rhs = ((4,2,3));

  Set idxInt = [[1,3]];

  Set sol=Rglpk::solveLP(obj, mat, rhs,
                         {[[Set idxInt, Real verbose=TRUE, Real max=TRUE]]})
};
 
Set View([[sol1,sol2, sol3]],"Std");
